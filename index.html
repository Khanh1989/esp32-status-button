<!DOCTYPE html>
<html>
<head>
  <title>ESP32 Control Panel</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>
  <h2>Điều khiển ESP32</h2>

  <button onclick="setLED(true)">BẬT LED</button>
  <button onclick="setLED(false)">TẮT LED</button>

  <h3>Trạng thái nút nhấn trên ESP32:</h3>
  <p id="buttonStatus">Đang tải...</p>

  <script>
    const firebaseConfig = {
  apiKey: "AIzaSyBQ7N7ph5gmjzjLg00KEVCkyw171w6RG6E",
  authDomain: "esp32-firebase-df4a5.firebaseapp.com",
  databaseURL: "https://esp32-firebase-df4a5-default-rtdb.firebaseio.com",
  projectId: "esp32-firebase-df4a5",
  storageBucket: "esp32-firebase-df4a5.firebasestorage.app",
  messagingSenderId: "951413630843",
  appId: "1:951413630843:web:3e9a2a87e6061b1779ffde",
  measurementId: "G-EX8TDX8Z7K"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function setLED(state) {
      db.ref("/led/status").set(state);
    }

    // Theo dõi trạng thái nút nhấn
    db.ref("/button/status").on("value", (snapshot) => {
      const status = snapshot.val();
      document.getElementById("buttonStatus").innerText = status ? "ĐANG NHẤN" : "KHÔNG NHẤN";
    });
  </script>
</body>
</html>
